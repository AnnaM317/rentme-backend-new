(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},n={app:0},a=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"2fb4":function(e,t,r){},"47c5":function(e,t,r){e.exports=r.p+"img/grid.a748accd.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("a630"),r("3ca3"),r("d3b7"),r("159b");var s=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("app-header",{on:{toggleSignup:e.toggleSignup,toggleLogin:e.toggleLogin,logout:e.logout}}),r("router-view"),e.loggedInUser||!e.isLogin||e.isSignUp?e._e():r("login",{on:{toggleLogin:e.toggleLogin,changeFormToSignup:e.changeFormToSignup,close:e.close}}),e.loggedInUser||!e.isSignUp||e.isLogin?e._e():r("signup",{on:{toggleSignup:e.toggleSignup,changeFormToLogin:e.changeFormToLogin,close:e.close}}),r("app-footer")],1)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"main-container",class:{"white-header":!e.onHomePage,"nav-scrolled":!e.topOfPage,"details-page":e.onDetailsPage}},[e.onExplorePage||e.onHomePage&&!e.topOfPage?r("main-filters",{attrs:{onExplorePage:e.onExplorePage,onHomePage:e.onHomePage,topOfPage:e.topOfPage},on:{filtered:e.goToExplorePage}}):e._e(),r("nav",{staticClass:"main-nav"},[r("router-link",{staticClass:"main-router-link",attrs:{to:"/"}},[r("div",{staticClass:"logo"},[r("font-awesome-icon",{attrs:{icon:["fab","airbnb"]}}),r("span",[e._v("rentme")])],1)]),r("div",{staticClass:"flex nav-content"},[r("router-link",{staticClass:"main-router-link",attrs:{to:"/explore"}},[e._v("Explore")]),r("router-link",{staticClass:"main-router-link",attrs:{to:"/user-profile"}},[e._v("Become A Host")]),r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"dropdown"},[r("button",{staticClass:"flex align-center user-btn dropbtn",on:{click:e.toggleUserModal}},[r("font-awesome-icon",{staticClass:"bars",attrs:{icon:"bars"}}),r("div",{staticClass:"user-logo"},[e.loggedInUser?r("img",{attrs:{src:e.imgUrl,alt:"user image"}}):r("font-awesome-icon",{attrs:{icon:"user-circle"}})],1)],1),r("div",{staticClass:"dropdown-content",class:{show:e.showUserModal},attrs:{id:"myDropdown"}},[e.loggedInUser?r("router-link",{attrs:{to:"/wishlist/"+e.userId}},[r("span",[e._v("Wishlist")])]):e._e(),e.loggedInUser?[e.loggedInUser?r("router-link",{attrs:{to:"/user-profile"}},[r("span",[e._v("Notifications")])]):e._e(),e.loggedInUser?r("router-link",{attrs:{to:"/trips"}},[r("span",[e._v("Trips")])]):e._e(),r("hr"),e.loggedInUser?r("router-link",{attrs:{to:"/stay/edit"}},[r("span",[e._v("Host your home")])]):e._e(),e.loggedInUser?r("router-link",{attrs:{to:"/user-profile"}},[r("span",[e._v("User profile")])]):e._e(),r("hr"),r("a",{on:{click:function(t){return t.stopPropagation(),e.logout.apply(null,arguments)}}},[e._v("Log out")])]:[r("a",{on:{click:function(t){return t.stopPropagation(),e.toggleLogin.apply(null,arguments)}}},[e._v("Log in")]),r("a",{on:{click:function(t){return t.stopPropagation(),e.toggleSignup.apply(null,arguments)}}},[e._v("Sign up")]),r("hr"),r("router-link",{attrs:{to:"/stay/edit"}},[r("span",[e._v("Host your home")])])]],2)])],1)],1),r("section",[e.onExplorePage?r("secondary-filters"):e._e()],1)],1)},o=[],c=(r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"main-filters",class:{"small-filter":e.onExplorePage||!e.topOfPage&&e.onHomePage}},[r("city-filter",{attrs:{currFilterBy:e.filterBy,onExplorePage:e.onExplorePage,topOfPage:e.topOfPage,onHomePage:e.onHomePage},on:{filteredCity:e.filterCity,filterClicked:e.enlargeSearchBtn}}),e.onExplorePage||!e.topOfPage&&e.onHomePage?r("double-date-picker"):r("date-picker",{on:{filtered:e.setDates,filterClicked:e.enlargeSearchBtn}}),r("guest-filter",{on:{addedGuests:e.addGuests,filterClicked:e.enlargeSearchBtn}}),r("div",{staticClass:"search-btn-container flex"},[r("button",{staticClass:"flex search-btn",on:{click:e.filter}},[r("font-awesome-icon",{attrs:{icon:"search"}}),e.largeSearchBtn&&e.onHomePage&&e.topOfPage?r("span",{staticClass:"search"},[e._v("Search")]):e._e()],1)])],1)}),l=[],u=(r("e9c4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"date-picker-cont"},[r("div",{staticClass:"block checkIn flex column"},[r("label",[e._v("Check in")]),r("el-date-picker",{attrs:{type:"date",placeholder:e.dateToStr(e.filterBy.dates.checkInDate)||"Add date"},on:{blur:e.copyFilter},model:{value:e.filterBy.dates.checkInDate,callback:function(t){e.$set(e.filterBy.dates,"checkInDate",t)},expression:"filterBy.dates.checkInDate"}})],1),r("div",{staticClass:"block checkOut flex column"},[r("label",[e._v("Check out")]),r("el-date-picker",{attrs:{type:"date",placeholder:e.dateToStr(e.filterBy.dates.checkOutDate)||"Add date"},on:{blur:e.copyFilter},model:{value:e.filterBy.dates.checkOutDate,callback:function(t){e.$set(e.filterBy.dates,"checkOutDate",t)},expression:"filterBy.dates.checkOutDate"}})],1)])}),d=[],p=(r("25f0"),{name:"datePicker2",data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"Today",onClick:function(e){e.$emit("pick",new Date)}},{text:"Yesterday",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"A week ago",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},filterBy:null}},created:function(){this.loadFilter()},methods:{loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},filtered:function(e){this.$emit("filterClicked"),this.$emit("filtered",e.dates),this.$store.dispatch({type:"setFilter",filterBy:e.dates})},copyFilter:function(){var e=JSON.parse(JSON.stringify(this.filterBy));this.filtered(e)},dateToStr:function(e){return e.toString()}}}),h=p,f=r("2877"),g=Object(f["a"])(h,u,d,!1,null,null,null),m=g.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"double-picker-cont"},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"","start-placeholder":"Add dates"},on:{blur:e.filtered},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1)])},y=[],w={name:"double-date-picker",data:function(){return{pickerOptions:{shortcuts:[{text:"Last week",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"Last month",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"Last 3 months",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},dates:[]}},methods:{filtered:function(){var e={checkInDate:this.dates[0],checkOutDate:this.dates[1]};console.log(e),this.$emit("filterClicked"),this.$emit("filtered",e)}}},_=w,k=Object(f["a"])(_,v,y,!1,null,null,null),b=k.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"guest-filter flex"},[r("div",{staticClass:"toggel-btn",on:{click:e.toggleGuests}},[r("label",[e._v("Guests")]),r("span",[e._v(e._s(e.guestsAdded))])]),e.shouldShow?r("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"clear-list add-guests",on:{blur:e.toggleGuests}},e._l(e.filterBy.guests,(function(t,s,n){return r("li",{key:n},[r("div",{staticClass:"selection"},[r("h3",[e._v(e._s(s[0].toUpperCase()+s.substring(1)))]),r("h4",[e._v(e._s(e.msgs[n]))])]),r("div",{staticClass:"multi-choice flex"},[r("button",{staticClass:"reduce-btn",class:{"not-allowed":!t,"added-guests":t>0},on:{click:function(t){return e.addGuest(-1,s)}}},[e._v(" â€“ ")]),r("div",{staticClass:"counter"},[e._v(e._s(t))]),r("button",{staticClass:"add-btn",on:{click:function(t){return e.addGuest(1,s)}}},[e._v("+")])])])})),0):e._e()])},x=[],S=(r("99af"),{name:"guest-filter",props:{},data:function(){return{filterBy:null,msgs:["Ages 13 or above","Ages 2-12","Under 2",""],shouldShow:!1}},created:function(){this.loadFilter()},methods:{loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},toggleGuests:function(){this.$emit("filterClicked"),this.shouldShow=!this.shouldShow},addGuest:function(e,t){(this.filterBy.guests[t]||-1!==e)&&(this.filterBy.guests[t]+=e,"adults"!==t&&"children"!==t||(this.filterBy.totalGuests+=e),this.$emit("addedGuests",this.filterBy))},onClickOutside:function(){this.shouldShow=!1}},computed:{guestsAdded:function(){var e,t=this.filterBy.totalGuests;if(t){var r=t>1?"Guests":"Guest";e="".concat(t," ").concat(r," ")}else e="Add guests";return e}},components:{}}),O=S,$=Object(f["a"])(O,C,x,!1,null,null,null),R=$.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"city-filter flex"},[r("div",{staticClass:"toggel-btn",on:{click:e.toggleLocations}},[e.onExplorePage||!e.topOfPage&&e.onHomePage?r("span",[e._v(e._s(e.filterBy.city||"Location"))]):[r("label",[e._v("Location")]),r("span",[e._v(" "+e._s(e.filterBy.city||"Where are you going?")+" ")])]],2),e.shouldShow?r("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"dropdown-list",on:{blur:e.toggleLocations}},[r("p",{on:{click:function(t){return e.filterCity("London")}}},[e._v("London")]),r("p",{on:{click:function(t){return e.filterCity("Tel Aviv")}}},[e._v("Tel Aviv")]),r("p",{on:{click:function(t){return e.filterCity("Hong Kong")}}},[e._v("Hong Kong")]),r("p",{on:{click:function(t){return e.filterCity("Rome")}}},[e._v("Rome")]),r("p",{on:{click:function(t){return e.filterCity("flexible")}}},[e._v("I'm flexible")])]):e._e()])},T=[],U={name:"city-filter",props:{currFilterBy:Object,onExplorePage:Boolean,topOfPage:Boolean,onHomePage:Boolean},data:function(){return{filterBy:this.currFilterBy,shouldShow:!1}},created:function(){},methods:{filterCity:function(e){this.filterBy.city=e,this.$emit("filteredCity",this.filterBy),this.toggleLocations()},toggleLocations:function(){this.$emit("filterClicked"),this.shouldShow=!this.shouldShow},onClickOutside:function(){this.shouldShow=!1}},computed:{},components:{}},I=U,E=Object(f["a"])(I,B,T,!1,null,null,null),L=E.exports,P={name:"stay-filter",props:["onExplorePage","topOfPage","onHomePage"],data:function(){return{filterBy:null,largeSearchBtn:!1}},created:function(){this.loadFilter()},methods:{loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},setDates:function(e){console.log("set dates main filter selected",e),this.filterBy.dates=e,console.log("set dates main filter this.filterBy",this.filterBy)},addGuests:function(e){this.filterBy.guests=e.guests,this.filterBy.totalGuests=e.totalGuests},filterCity:function(e){this.filterBy.city=e.city},filter:function(){var e=this.filterBy;this.$store.dispatch({type:"setFilter",filterBy:e}),this.$emit("filtered",e)},enlargeSearchBtn:function(){this.largeSearchBtn=!0}},components:{datePicker:m,guestFilter:R,cityFilter:L,doubleDatePicker:b}},j=P,A=Object(f["a"])(j,c,l,!1,null,null,null),D=A.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeModal,expression:"closeModal"}],staticClass:"secondary-filters"},[r("div",{staticClass:"dropdown"},[r("button",{class:{active:e.price.shouldShow},on:{click:function(t){return e.toggleModal("price")}}},[e._v(" Price ")]),r("div",{staticClass:"dropdown-content price",class:{show:e.price.shouldShow}},[r("button",{staticClass:"close-btn",on:{click:e.closeModal}},[e._v("âœ•")]),r("p",[e._v("The average nightly price is $220")]),r("el-slider",{attrs:{range:"",min:15,max:850},on:{change:e.dispatchToStore},model:{value:e.filterBy.priceRange,callback:function(t){e.$set(e.filterBy,"priceRange",t)},expression:"filterBy.priceRange"}}),r("div",{staticClass:"flex"},[r("p",[e._v(" min price "),r("br"),r("span",[e._v("$"+e._s(e.filterBy.priceRange[0]))])]),e._v(" - "),r("p",[e._v(" max price "),r("br"),r("span",[e._v("$"+e._s(e.filterBy.priceRange[1]))])])])],1)]),r("div",{staticClass:"dropdown"},[r("button",{class:{active:e.propertyType.shouldShow},on:{click:function(t){return e.toggleModal("propertyType")}}},[e._v(" Property Type ")]),r("div",{staticClass:"dropdown-content",class:{show:e.propertyType.shouldShow}},e._l(e.propertyType.types,(function(t){return r("p",{key:t,staticClass:"pointer",on:{click:function(r){return e.setPropertyType(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"dropdown"},[r("button",{class:{active:e.amenities.shouldShow},on:{click:function(t){return e.toggleModal("amenities")}}},[e._v(" Amenities ")]),r("div",{staticClass:"dropdown-content amenities",class:{show:e.amenities.shouldShow}},[e.amenities.shouldShow?r("button",{on:{click:e.setAmenities}},[e._v(" Show results ")]):e._e(),e._l(e.amenities.types,(function(t,s){return r("div",{key:s},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.amenities,expression:"filterBy.amenities"}],attrs:{type:"checkbox",id:t},domProps:{value:t,checked:Array.isArray(e.filterBy.amenities)?e._i(e.filterBy.amenities,t)>-1:e.filterBy.amenities},on:{change:function(r){var s=e.filterBy.amenities,n=r.target,a=!!n.checked;if(Array.isArray(s)){var i=t,o=e._i(s,i);n.checked?o<0&&e.$set(e.filterBy,"amenities",s.concat([i])):o>-1&&e.$set(e.filterBy,"amenities",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.filterBy,"amenities",a)}}}),r("label",{attrs:{for:t}},[r("p",[e._v(e._s(t))])])])}))],2)]),r("button",{staticClass:"clear",on:{click:e.clearSearch}},[e._v("Clear search")])])},N=[],M={name:"secondary-filter",data:function(){return{filterBy:null,previousBtn:"",price:{shouldShow:!1},propertyType:{types:["Entire home","Entire condo","Entire rental unit","Entire loft","Entire bungalow","Private room in rental unit"],shouldShow:!1},amenities:{types:["Kitchen","Wifi","TV","Coffee","Crib","Smoking allowed","No smoking","Pets allowed","Cooking basics","Air conditioning","Refrigerator","Free parking","Bathub","Heating","Pool","Accessible","Long term stays allowed"],shouldShow:!1}}},created:function(){this.loadFilter()},methods:{toggleModal:function(e){this.previousBtn&&this.previousBtn!==e?(this[this.previousBtn].shouldShow=!1,this[e].shouldShow=!0,this.previousBtn=e):this.previousBtn===e?(this[e].shouldShow=!1,this.previousBtn=""):(this[e].shouldShow=!0,this.previousBtn=e)},loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},dispatchToStore:function(){this.$store.dispatch({type:"setFilter",filterBy:this.filterBy}),this.loadFilter()},setPropertyType:function(e){this.filterBy.propertyType=e,this.dispatchToStore(),this.closeModal()},setAmenities:function(){this.closeModal(),this.dispatchToStore()},clearSearch:function(){this.filterBy.priceRange=[15,850],this.filterBy.amenities=[],this.filterBy.propertyType="",this.dispatchToStore()},closeModal:function(){this[this.previousBtn]&&(this[this.previousBtn].shouldShow=!1,this.previousBtn="")}},computed:{}},G=M,H=Object(f["a"])(G,F,N,!1,null,null,null),J=H.exports,W={name:"app-header",data:function(){return{onHomePage:!1,onExplorePage:!1,showUserModal:!1,topOfPage:!0,showLogin:!1,showMainFilters:!1,onDetailsPage:!1}},beforeMount:function(){window.addEventListener("scroll",this.handelScroll)},watch:{$route:{handler:function(){this.onHomePage="Home"===this.$route.name,this.onExplorePage="Explore"===this.$route.name,this.onDetailsPage="stayDetails"===this.$route.name,console.log("this.$route.name",this.$route)},immediate:!0}},computed:{userId:function(){return this.$store.getters.loggedInUser._id},loggedInUser:function(){return this.$store.getters.loggedInUser},imgUrl:function(){var e=this.$store.getters.loggedInUser;return e&&null!==e&&void 0!==e&&e.imgUrl?e.imgUrl:""}},methods:{toggleUserModal:function(){this.showUserModal=!this.showUserModal},onClickOutside:function(){this.showUserModal=!1},handelScroll:function(){window.pageYOffset>0?this.topOfPage=!1:this.topOfPage=!0},toggleLogin:function(){this.$emit("toggleLogin"),this.showUserModal=!1},toggleSignup:function(){this.$emit("toggleSignup"),this.showUserModal=!1},logout:function(){this.$emit("logout"),this.showUserModal=!1},goToExplorePage:function(){this.$router.push("/explore")}},components:{mainFilters:D,secondaryFilters:J}},q=W,Y=Object(f["a"])(q,i,o,!1,null,null,null),K=Y.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login-modal",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"login-header"},[r("button",{staticClass:"close-btn",on:{click:e.close}},[r("span",[e._v("âœ•")])]),r("h3",[e._v("Login")])]),r("div",{staticClass:"login-input"},[r("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.username,expression:"userCred.username"}],ref:"username",attrs:{type:"text",placeholder:"Enter username"},domProps:{value:e.userCred.username},on:{input:function(t){t.target.composing||e.$set(e.userCred,"username",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.password,expression:"userCred.password"}],attrs:{type:"password",placeholder:"Enter password"},domProps:{value:e.userCred.password},on:{input:function(t){t.target.composing||e.$set(e.userCred,"password",t.target.value)}}}),r("button",{staticClass:"checkout-btn",on:{mousemove:e.changeBtnColor}},[r("span",[e._v("Continue")])])]),r("div",{staticClass:"change-signup-button"},[r("small",[e._v("Don't have an account? Go to "),r("button",{on:{click:function(t){return t.stopPropagation(),e.changeFormToSignup.apply(null,arguments)}}},[e._v("Signup")])])])])])},z=[],X=r("1da1"),Q=(r("96cf"),"show-msg"),Z=new s["default"];function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";Z.$emit(Q,{txt:e,type:t})}var te={name:"login",data:function(){return{userCred:{username:"",password:""},msg:"",isLoading:!1}},created:function(){var e=this;this.$nextTick((function(){return e.$refs.username.focus()}))},methods:{login:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("userCred",e.userCred),e.userCred.username&&e.userCred.password){t.next=4;break}return t.abrupt("return",e.msg="Please enter username/password");case 4:return t.next=6,e.$store.dispatch({type:"login",userCred:e.userCred});case 6:"Home"!==e.$route.name&&e.$router.push("/"),ee("Logged in successfully"),e.userCred={},t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),ee("Logged in failed","error"),console.log("err",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},changeFormToSignup:function(){this.$emit("changeFormToSignup")},close:function(){this.$emit("close")},changeBtnColor:function(e){var t=e.offsetX-e.target.offsetLeft,r=e.offsetY-e.target.offsetLeft;e.target.style.setProperty("--x","".concat(t,"px")),e.target.style.setProperty("--y","".concat(r,"px"))}},computed:{}},re=te,se=Object(f["a"])(re,V,z,!1,null,null,null),ne=se.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"signup-modal",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"signup-header"},[r("button",{staticClass:"close-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[r("span",[e._v("âœ•")])]),r("p",[e._v("Sign up")])]),r("div",{staticClass:"signup-input"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.signup.apply(null,arguments)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.fullname,expression:"userCred.fullname"}],ref:"fullname",attrs:{type:"text",placeholder:"Enter fullname"},domProps:{value:e.userCred.fullname},on:{input:function(t){t.target.composing||e.$set(e.userCred,"fullname",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.username,expression:"userCred.username"}],attrs:{type:"text",placeholder:"Enter username"},domProps:{value:e.userCred.username},on:{input:function(t){t.target.composing||e.$set(e.userCred,"username",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.email,expression:"userCred.email"}],attrs:{type:"email",placeholder:"Enter email"},domProps:{value:e.userCred.email},on:{input:function(t){t.target.composing||e.$set(e.userCred,"email",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userCred.password,expression:"userCred.password"}],attrs:{type:"password",placeholder:"Enter password"},domProps:{value:e.userCred.password},on:{input:function(t){t.target.composing||e.$set(e.userCred,"password",t.target.value)}}}),r("button",{ref:"myBtn",staticClass:"checkout-btn"},[r("span",[e._v("Continue")])])]),r("div",{staticClass:"change-login-button"},[r("small",[e._v("Already have an account? Back to "),r("button",{on:{click:function(t){return t.stopPropagation(),e.changeFormToLogin.apply(null,arguments)}}},[e._v("login")])])])])])},ie=[],oe={name:"signup",data:function(){return{userCred:{username:"",fullname:"",email:"",password:""},msg:"",isLoading:!1}},created:function(){var e=this;this.$nextTick((function(){return e.$refs.fullname.focus()}))},methods:{signup:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoading=!0,e.userCred.email&&!e.userCred.fullname&&e.userCred.password&&e.userCred.username){t.next=4;break}return t.abrupt("return",e.msg="Please fill up the form");case 4:return t.next=6,e.$store.dispatch({type:"signup",userCred:e.userCred});case 6:"Home"!==e.$route.name&&e.$router.push("/"),ee("Signed up successfully!"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),ee("Sign up failed!","error");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},changeFormToLogin:function(){this.$emit("changeFormToLogin")},close:function(){this.$emit("close")}}},ce=oe,le=Object(f["a"])(ce,ae,ie,!1,null,null,null),ue=le.exports,de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"main-footer main-container"},[r("section",{staticClass:"footer"},[r("p",{staticClass:"footer-header"},[e._v("Inspiration for future getaways")]),r("div",{staticClass:"top-rated"},[e.topStays?r("footer-list",{attrs:{places:e.topStays,listTitle:"Top Rated"},on:{cardClicked:e.cardClicked}}):e._e()],1),r("div",{staticClass:"top-nearby"},[r("footer-list",{attrs:{places:e.topStays,listTitle:"Nearby"},on:{cardClicked:e.cardClicked}})],1),r("div",{staticClass:"top-cities"},[r("footer-list",{attrs:{places:e.citiesForList,listTitle:"Cities"},on:{cardClicked:e.cardClicked}})],1),r("div",{staticClass:"copy-rights"},[r("p",[e._v("@2021 rentme, Inc")]),r("span",[e._v("Â·")]),r("router-link",{staticClass:"main-router-link",attrs:{to:"/"}},[r("span",[e._v("About")])]),r("span",[e._v("Â·")]),r("router-link",{staticClass:"main-router-link",attrs:{to:"/"}},[r("span",[e._v("Login")])]),r("span",[e._v("Â·")]),r("router-link",{staticClass:"main-router-link host-link",attrs:{to:"/become-host"}},[e._v("Become A Host")])],1)])])},pe=[],he=(r("fb6a"),r("4de4"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"footer-container"},[[r("p",{staticClass:"list-title"},[e._v(e._s(e.listTitle))]),r("ul",{staticClass:"footer-list clean-list"},e._l(e.places,(function(t){return r("li",{key:t.name,staticClass:"footer-card pointer",on:{click:function(r){return e.cardClicked(t)}}},[r("div",{staticClass:"top-footer"},[t.avgRate?void 0:e._e(),r("p",[e._v(e._s(t.name))])],2)])})),0)]],2)}),fe=[],ge={name:"footer-list",props:["places","listTitle"],data:function(){return{}},created:function(){},methods:{cardClicked:function(e){this.$emit("cardClicked",e)}},components:{}},me=ge,ve=Object(f["a"])(me,he,fe,!1,null,null,null),ye=ve.exports,we={name:"app-footer",data:function(){return{topStays:null,citiesForList:[{name:"London",address:"England"},{name:"Hong Kong",address:"China"},{name:"Tel Aviv",address:"Israel"},{name:"Rome",address:"Italy"}]}},created:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"loadStays"});case 2:r=e.$store.getters.staysToShow,e.topStays=r.filter((function(e){return e.avgRate>=4.5})).slice(0,4);case 4:case"end":return t.stop()}}),t)})))()},methods:{cardClicked:function(e){this.filterBy.city=e.name,e._id?this.$router.push("/stay/"+e._id):this.setFilter(this.filterBy)}},components:{footerList:ye}},_e=we,ke=Object(f["a"])(_e,de,pe,!1,null,null,null),be=ke.exports,Ce={data:function(){return{isSignUp:!1,isLogin:!1}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},methods:{toggleSignup:function(){this.isSignUp=!0,this.isLogin=!1},toggleLogin:function(){this.isLogin=!0,this.isSignUp=!1},changeFormToSignup:function(){this.isLogin=!1,this.isSignUp=!0},changeFormToLogin:function(){this.isLogin=!0,this.isSignUp=!1},logout:function(){this.$store.dispatch({type:"logout"}),this.isLogin=!1,this.isSignUp=!1},close:function(){this.isLogin=!1,this.isSignUp=!1}},components:{appHeader:K,login:ne,signup:ue,appFooter:be}},xe=Ce,Se=Object(f["a"])(xe,n,a,!1,null,null,null),Oe=Se.exports,$e=r("9483");Object($e["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Re=r("ade3"),Be=r("8c4f"),Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"home-page main-container"},[r("div",{staticClass:"pic full"},[r("div",{staticClass:"main-header"},[r("section",[r("stayFilter",{on:{filtered:e.setFilter}}),r("h1",{staticClass:"main-txt"},[e._v("Find a place to stay anywhere. Anytime.")])],1)])]),r("section",{staticClass:"top-rated"},[r("home-list",{attrs:{places:e.citiesForList,listTitle:"Popular destinations"},on:{cardClicked:e.cardClicked}}),e.topStays?r("home-list",{attrs:{places:e.topStays,listTitle:"Top Rated"},on:{cardClicked:e.cardClicked}}):e._e(),r("section",[r("div",{staticClass:"become-a-host"},[r("h4",[e._v("Become a host")]),r("p",[e._v(" earn extra income and unlock new opportunities by sharing your space. ")]),r("router-link",{staticClass:"main-router-link",attrs:{to:"/user-profile"}},[r("button",{attrs:{onclick:"window.location.href=/'become-host'"}},[e._v(" Learn more ")])])],1)])],1)])},Ue=[],Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[e.isLoading?s("div",{staticClass:"loader"},[s("img",{attrs:{src:r("47c5")}})]):e._e(),e.isLoading?e._e():s("ul",{staticClass:"stay-list"},e._l(e.stays,(function(e){return s("li",{key:e._id,staticClass:"clear-list stay-list"},[s("stay-preview",{attrs:{stay:e}})],1)})),0)])},Ee=[],Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.stay?r("section",{staticClass:"stay-preview"},[r("div",{staticClass:"block-content"},[e.likedStay?r("span",{staticClass:"liked-full-heart",on:{click:function(t){return t.stopPropagation(),e.toggleLikedStay(e.stay._id)}}},[r("font-awesome-icon",{attrs:{icon:["fas","heart"]}})],1):r("span",{staticClass:"liked-stay-content",on:{click:function(t){return t.stopPropagation(),e.toggleLikedStay(e.stay._id)}}},[r("font-awesome-icon",{attrs:{icon:["fas","heart"]}})],1),r("el-carousel",{attrs:{trigger:"click",arrow:"always",autoplay:!1,height:"250px"}},e._l(e.stay.imgUrls,(function(t,s){return r("el-carousel-item",{key:s},[r("router-link",{staticClass:"router-link",attrs:{to:"/stay/"+e.stay._id}},[r("img",{staticClass:"preview_img",attrs:{src:e.stay.imgUrls[s]}})])],1)})),1)],1),r("router-link",{staticClass:"router-link",attrs:{to:"/stay/"+e.stay._id}},[r("p",[r("font-awesome-icon",{attrs:{icon:"star"}}),r("span",{staticClass:"avg-rate"},[e._v(e._s(e.avgRate)+" ")]),r("span",{staticClass:"review-rate"},[e._v(" "+e._s(e.reviewCount)+" ")])],1),r("p",{staticClass:"stay-type"},[e._v(e._s(e.stay.type)+" Â· "+e._s(e.stay.loc.city))]),r("p",{staticClass:"stay-name"},[e._v(e._s(e.sortTxt))]),r("p",{staticClass:"stay-price"},[r("span",[e._v("$"+e._s(e.stay.price))]),e._v(" / night ")])])],1):e._e()},Pe=[],je=(r("b680"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"price-slider"},[e._m(0),r("input",{attrs:{value:"25000",min:"0",max:"120000",step:"500",type:"range"}}),r("input",{attrs:{value:"50000",min:"0",max:"120000",step:"500",type:"range"}}),r("svg",{attrs:{width:"100%",height:"24"}},[r("line",{attrs:{x1:"4",y1:"0",x2:"300",y2:"0",stroke:"#212121","stroke-width":"12","stroke-dasharray":"1 28"}})])])}),Ae=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[e._v("from "),r("input",{attrs:{type:"number",value:"5000",min:"0",max:"120000"}}),e._v(" to "),r("input",{attrs:{type:"number",value:"50000",min:"0",max:"120000"}})])}],De={},Fe=De,Ne=Object(f["a"])(Fe,je,Ae,!1,null,null,null),Me=Ne.exports,Ge=Object(Re["a"])({components:{priceRangeFilter:Me},name:"stay-preview",props:["stay"],data:function(){return{likedStay:!1}},computed:{reviewCount:function(){var e=this.stay.reviews;return e.length?1===e.length?"(".concat(e.length," review)"):e.length>1?"(".concat(e.length," reviews)"):void 0:"New"},sortTxt:function(){var e=this.stay.name,t=e.charAt(0).toUpperCase()+e.slice(1);return t},avgRate:function(){if(!this.stay.reviews.length)return 0;var e=this.stay.reviews.reduce((function(e,t){return e+t.rate}),0);return(e/this.stay.reviews.length).toFixed(1)}},methods:{toggleLikedStay:function(e){this.likedStay=!this.likedStay,this.$store.dispatch({type:"toggleLikedStay",stayId:e}),this.likedStay?ee("Added to wishlist"):ee("Removed from wishlist")}}},"components",{priceRange:Me}),He=Ge,Je=Object(f["a"])(He,Le,Pe,!1,null,null,null),We=Je.exports,qe={name:"stay-list",props:["stays"],data:function(){return{}},created:function(){this.$store.dispatch({type:"loadStays"})},computed:{isLoading:function(){return this.$store.getters.isLoading}},components:{stayPreview:We,secondaryFilters:J}},Ye=qe,Ke=Object(f["a"])(Ye,Ie,Ee,!1,null,null,null),Ve=Ke.exports,ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"list-container column"},[r("h2",[e._v(e._s(e.listTitle))]),r("ul",{staticClass:"home-list clean-list"},e._l(e.places,(function(t){return r("li",{key:t.imgUrls[0],staticClass:"card pointer",on:{click:function(r){return e.cardClicked(t)}}},[r("img",{staticClass:"card-img",attrs:{src:t.imgUrls[0]}}),r("div",{staticClass:"flex"},[t.avgRate?[r("font-awesome-icon",{attrs:{icon:"star"}}),r("span",{staticClass:"avgRate"},[e._v(e._s(t.avgRate||"")+" ")])]:e._e(),r("h4",[e._v(e._s(t.name))])],2)])})),0)])},Xe=[],Qe={name:"home-list",props:["places","listTitle"],data:function(){return{}},created:function(){},methods:{cardClicked:function(e){this.$emit("cardClicked",e)}},components:{}},Ze=Qe,et=Object(f["a"])(Ze,ze,Xe,!1,null,null,null),tt=et.exports,rt={name:"home-page",data:function(){return{filterBy:null,topStays:null,citiesForList:[{name:"London",imgUrls:["https://res.cloudinary.com/disku3v4j/image/upload/v1638609791/travel%20posters/itl.cat_london-iphone-wallpaper_248104_tueo1k.jpg"]},{name:"Hong Kong",imgUrls:["https://res.cloudinary.com/disku3v4j/image/upload/v1638618156/travel%20posters/mark-billante-vtuVWgtSYzo-unsplash_noeiqn.jpg"]},{name:"Tel Aviv",imgUrls:["https://res.cloudinary.com/disku3v4j/image/upload/v1638700827/tel-aviv/wp6537669_pa56s3.jpg"]},{name:"Rome",imgUrls:["https://res.cloudinary.com/disku3v4j/image/upload/v1638609793/travel%20posters/itl.cat_rome-wallpaper_2989992_fxkntx.jpg"]}]}},created:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearAllFilters(),e.loadFilter(),t.next=4,e.$store.dispatch({type:"loadStays"});case 4:r=e.$store.getters.staysToShow,e.topStays=r.filter((function(e){return e.avgRate>=4.5})).slice(0,4);case 6:case"end":return t.stop()}}),t)})))()},methods:{setFilter:function(e){this.$router.push("/explore"),this.$store.dispatch({type:"setFilter",filterBy:e})},cardClicked:function(e){this.filterBy.city=e.name,e._id?this.$router.push("/stay/"+e._id):this.setFilter(this.filterBy)},loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},clearAllFilters:function(){this.$store.commit({type:"clearAllFilters"})}},components:{stayFilter:D,stayList:Ve,homeList:tt}},st=rt,nt=Object(f["a"])(st,Te,Ue,!1,null,null,null),at=nt.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[e.isLoading?s("div",{staticClass:"loader"},[s("img",{attrs:{src:r("47c5")}})]):e._e(),e.stay&&!e.isLoading?s("section",{staticClass:"stay-details main-container"},[s("h2",[e._v(e._s(e.formattedName))]),s("div",{staticClass:"review-details"},[[s("font-awesome-icon",{attrs:{icon:"star"}}),s("span",{staticClass:"rate"},[e._v(e._s(e.avgRate))]),s("span",{staticClass:"reviews"},[e._v(e._s(e.formattedReviews))]),e._v("Â· ")],s("a",{staticClass:"details-location",attrs:{href:""}},[e._v(" "+e._s(e.stay.loc.address))])],2),s("div",{staticClass:"images-display-container"},e._l(e.imgs,(function(e,t){return s("label",{key:t},[s("img",{attrs:{src:e,alt:""}})])})),0),s("div",{staticClass:"details-main-container flex"},[s("div",{staticClass:"stay-details-left-container"},[s("div",{staticClass:"info-header"},[s("div",{staticClass:"info"},[s("h2",[e._v(e._s(e.stay.type)+" hosted by "+e._s(e.stay.host.fullname))]),s("p",[e._v(" "+e._s(e.stay.capacity)+" guests "),s("span",[e._v(" Â· ")]),e._v(" "+e._s(e.stay.type)+" "),s("span",[e._v(" Â·")]),e._v(" "+e._s(e.beds)+" ")])]),s("img",{attrs:{src:e.stay.host.imgUrl,alt:""}})]),s("hr"),s("div",{staticClass:"assets-container"},[s("div",{staticClass:"assets-content"},[s("div",{staticClass:"icon"},[s("font-awesome-icon",{attrs:{icon:"home"}})],1),e._m(0)]),s("div",{staticClass:"assets-content"},[s("div",{staticClass:"icon"},[s("font-awesome-icon",{attrs:{icon:"broom"}})],1),e._m(1)]),s("div",{staticClass:"assets-content"},[s("div",{staticClass:"icon"},[s("font-awesome-icon",{attrs:{icon:"door-closed"}})],1),e._m(2)]),s("div",{staticClass:"assets-content"},[s("div",{staticClass:"icon"},[s("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._m(3)])]),s("hr"),s("div",{staticClass:"details-summary-container"},[s("long-text",{attrs:{summary:e.stay.summary}})],1),s("hr"),s("div",{staticClass:"stay-details-amenities"},[s("h2",[e._v("What this place offers")]),s("div",{staticClass:"amenities-content"},e._l(e.stay.amenities,(function(t,r){return s("div",{key:r},[s("font-awesome-icon",{staticClass:"font-amenity-icon",attrs:{icon:e.iconToShow(t)}}),e._v(" "+e._s(t)+" ")],1)})),0)])]),s("div",{staticClass:"stay-details-right-container",attrs:{id:"right"}},[s("stay-checkout",{attrs:{stay:e.stay},on:{orderReady:e.placeOrder}})],1)]),e.stay.reviews.length?s("div",{staticClass:"reviews-section-container"},[s("hr"),s("stay-rating",{attrs:{reviews:e.reviews}}),s("review-list",{attrs:{reviews:e.reviews}})],1):e._e(),s("div",{staticClass:"map-section"},[s("hr"),s("h2",[e._v("Where youâ€™ll be")]),s("div",{staticClass:"about"},[s("GmapMap",{staticClass:"map",attrs:{stay:e.stay,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1}}})],1)])]):e._e()])},ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Entire home")]),r("p",[e._v("Youâ€™ll have the loft to yourself.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Enhanced Clean")]),r("p",[e._v(" This Host committed to Airbnb's 5-step enhanced cleaning process. Show more ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Self check-in")]),r("p",[e._v("Check yourself in with the lockbox.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Great location")]),r("p",[e._v("100% of recent guests gave the location a 5-star rating.")])])}],ct={delay:dt,getRandomInt:pt,makeId:ht,saveToStorage:lt,loadFromStorage:ut,getIcon:ft};function lt(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function ut(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))}function pt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function ht(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function ft(e){switch(e){case"Kitchen":return"utensils";case"Wifi":return"wifi";case"TV":return"tv";case"Crib":return"baby-carriage";case"Smoking allowed":return"smoking";case"No smoking":return"smoking-ban";case"Pets allowed":return"paw";case"Cooking basics":return"blender";case"Air conditioning":return"snowflake";case"Refrigerator":return"fa-regular fa-refrigerator";case"Free parking":return"parking";case"Hottub":return"hot-tub";case"Elevator":return"fa-solid fa-elevator";case"Iron":return"iron";case"Heating":return"temperature-high";case"Pool":return"swimming-pool";case"Spa":return"spa";case"Bathtub":return"bath";case"Accessible":return"wheelchair";case"Beach access â€“ Beachfront":return"umbrella-beach";case"Long term stays allowed":return"calendar-alt";case"Coffee":return"coffee";case"Private gym in building":return"dumbbell";default:break}}var gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"myMap"},[r("GmapMap",{ref:"mapRef",staticStyle:{height:"500px"},attrs:{center:e.center,zoom:15,"map-type-id":"terrain"}},e._l(e.markers,(function(t,s){return r("GmapMarker",{key:s,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(r){e.center=t.position}}})})),1)],1)},mt=[],vt={name:"myMap",props:["stay"],data:function(){return{markers:[{position:{lat:0,lng:0}}],center:{lat:0,lng:0}}},created:function(){this.center=this.markers[0].position,this.markers[0].position.lat=this.stay.loc.lat,this.markers[0].position.lng=this.stay.loc.lng},methods:{moveTo:function(e){var t=e.lat,r=e.lng;this.$refs.mapRef.$mapPromise.then((function(e){e.panTo({lat:t,lng:r})}))}}},yt=vt,wt=Object(f["a"])(yt,gt,mt,!1,null,null,null),_t=wt.exports,kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"stay-checkout",attrs:{id:"checkoutContainer"}},[r("section",{staticClass:"checkout-container"},[r("div",{staticClass:"checkout-form-container"},[r("div",{staticClass:"checkout-form-header flex space-between align-center"},[r("div",{staticClass:"order-price-container"},[r("p",{staticClass:"price"},[e._v("$"+e._s(e.stay.price)),r("span",[e._v(" / night")])])]),r("div",{staticClass:"check-rating-container flex align-center"},[r("font-awesome-icon",{attrs:{icon:"star"}}),r("p",[e._v(e._s(e.avgRate))]),r("span",[e._v(" "+e._s(e.formattedReviews))])],1)]),r("div",{staticClass:"form-container"},[r("div",{staticClass:"select-form"},[r("date-picker",{on:{filtered:e.setDates}}),r("checkoutGuestModal",{attrs:{stay:e.stay},on:{addedGuests:e.setGuests}})],1),r("span",{staticClass:"user-alert",class:{"show-alert":e.userAlert}},[e._v(e._s(e.userAlert))]),r("div",{staticClass:"btn-checkout-container"},[r("button",{staticClass:"btn-checkout",attrs:{disabled:"Reserved!"===e.btnTxt},on:{mousemove:e.changeBtnColor,click:e.checkOut}},[r("span",[e._v(e._s(e.btnTxt))])])])]),e.showOrderPreview?[r("section",{staticClass:"order-preview flex column"},[r("span",[e._v("You won't be charged yet")]),r("div",{staticClass:"flex"},[r("span",[e._v("$"+e._s(e.stay.price)+" x "+e._s(e.totalNights)+" nights")]),r("span",[e._v("$"+e._s(e.totalPrice))])]),e._m(0),r("hr"),r("div",{staticClass:"flex"},[r("span",[e._v("Total")]),r("span",[e._v("$"+e._s(e.totalPrice))])])])]:e._e()],2)]),r("section",{staticClass:"section-checkout"},[e.isModalOpen?r("checkout-modal",{staticClass:"checkout-modal",attrs:{txt:e.userAlert},on:{closeModal:e.closeModal}}):e._e()],1),r("section",{staticClass:"mobile-checkout"},[r("checkoutMobile")],1)])},bt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex"},[r("span",[e._v("Service fee")]),r("span",[e._v("$0")])])}],Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"checkout-guest-modal"},[r("div",{staticClass:"toggle-btn",on:{click:e.toggleGuests}},[r("label",[e._v("Guests "),r("span",{staticClass:"add-guests-input"},[e._v(e._s(e.guestsAdded))])]),r("font-awesome-icon",{attrs:{icon:"chevron-down"}})],1),e.shouldShow?r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"add-guests"},[e._l(e.filterBy.guests,(function(t,s,n){return r("div",{key:n,staticClass:"guest-item flex space-between align-center"},[r("div",[r("h3",[e._v(e._s(s[0].toUpperCase()+s.substring(1)))]),r("h4",[e._v(e._s(e.msgs[n]))])]),r("div",{staticClass:"action-btns flex align-center justify-center"},[r("button",{staticClass:"reduce-btn",class:{"not-allowed":!t||"adults"===s&&1===t,"added-guests":t>0},on:{click:function(t){return e.addGuest(-1,s)}}},[e._v(" â€“ ")]),r("div",{staticClass:"counter"},[e._v(e._s(t))]),r("button",{staticClass:"add-btn",class:{"disabled-btn":e.disabledBtns[s]},on:{click:function(t){return e.addGuest(1,s)}}},[e._v(" + ")])])])})),r("a",{on:{click:e.toggleGuests}},[e._v("Close")])],2):e._e()])},xt=[],St={name:"checkout-guest-modal",props:{stay:Object},data:function(){return{filterBy:this.currFilterBy,msgs:["Age 13 +","Ages 2-12","Under 2",""],shouldShow:!1,disabledBtns:{adults:!1,children:!1,infants:!1,pets:!1}}},created:function(){this.loadFilter(),this.addGuest(1,"adults")},methods:{loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},toggleGuests:function(){this.shouldShow=!this.shouldShow},addGuest:function(e,t){this.toggleDisabledBtns(e,t),1===e&&this.filterBy.totalGuests+1>this.stay.capacity&&("adults"===t||"children"===t)||(this.filterBy.guests[t]||-1!==e)&&(1===this.filterBy.guests.adults&&"adults"===t&&-1===e||"infants"===t&&1===e&&this.filterBy.guests.infants>4||(this.filterBy.guests[t]+=e,"adults"!==t&&"children"!==t||(this.filterBy.totalGuests+=e),this.$emit("addedGuests",this.filterBy.totalGuests)))},toggleDisabledBtns:function(e,t){1===e&&this.filterBy.totalGuests+1>this.stay.capacity?"pets"!==t&&(this.disabledBtns[t]=!0):this.disabledBtns[t]=!1,"infants"===t&&(this.filterBy.guests.infants>3?this.disabledBtns.infants=!0:this.disabledBtns.infants=!1)},onClickOutside:function(){this.shouldShow=!1}},computed:{guestsAdded:function(){var e,t=this.filterBy.totalGuests;if(t){var r=t>1?"Guests":"Guest";e="".concat(t," ").concat(r," ")}else e="Add guests";return e}},components:{}},Ot=St,$t=Object(f["a"])(Ot,Ct,xt,!1,null,null,null),Rt=$t.exports,Bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h2",[e._v("Thank you for booking!")]),r("button",{staticClass:"close-modal",on:{click:function(t){return e.$emit("closeModal")}}},[e._v("Done")])])},Tt=[],Ut={name:"checkout-modal",methods:{}},It=Ut,Et=Object(f["a"])(It,Bt,Tt,!1,null,null,null),Lt=Et.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"headline",attrs:{href:"#right"}},[e._v(" Reserve this home")])},jt=[],At={name:"mobile-checkout",methods:{}},Dt=At,Ft=Object(f["a"])(Dt,Pt,jt,!1,null,null,null),Nt=Ft.exports,Mt={name:"stay-checkout",props:{stay:Object},data:function(){return{filterBy:null,isModalOpen:!1,order:null,showOrderPreview:!1,isOrderReady:!1,btnTxt:"Check availability",userAlert:0}},created:function(){this.loadFilter(),this.loadEmptyOrder()},computed:{formattedReviews:function(){return this.stay.reviews.length?1===this.stay.reviews.length?"(".concat(this.stay.reviews.length," review)"):this.stay.reviews.length>1?"(".concat(this.stay.reviews.length," reviews)"):void 0:"(new)"},totalPrice:function(){return this.order.totalPrice.toLocaleString()},totalNights:function(){return this.order.totalNights},avgRate:function(){if(!this.stay.reviews.length)return 0;var e=this.stay.reviews.reduce((function(e,t){return e+t.rate}),0);return(e/this.stay.reviews.length).toFixed(1)}},methods:{loadFilter:function(){var e=this.$store.getters.filterBy;this.filterBy=JSON.parse(JSON.stringify(e))},setDates:function(e){this.filterBy.dates=e,this.order.dates=this.filterBy.dates},setGuests:function(e){this.order.totalGuests=e},changeBtnColor:function(e){var t=e.offsetX-e.target.offsetLeft,r=e.offsetY-e.target.offsetLeft;e.target.style.setProperty("--x","".concat(t,"px")),e.target.style.setProperty("--y","".concat(r,"px"))},prepareOrder:function(){var e=this.order.dates,t=e.checkInDate,r=e.checkOutDate,s=new Date(t),n=new Date(r),a=n.getTime()-s.getTime(),i=Math.ceil(a/864e5),o=this.stay.price*i;o<=0?this.userAlert="Please enter valid dates":(this.btnTxt="Reserve",this.order.totalPrice=o,this.order.totalNights=i,this.isOrderReady=!0,this.userAlert="",this.showOrderPreview=!0)},checkOut:function(){this.order.dates=this.filterBy.dates;var e=this.order.dates,t=e.checkInDate,r=e.checkOutDate;this.isOrderReady?(this.btnTxt="Reserved!",this.showCheckOutModal("Thank you for booking!"),this.$emit("orderReady",this.order)):t&&r?this.prepareOrder():this.userAlert="Please enter dates"},showCheckOutModal:function(){this.isModalOpen=!0,setTimeout(this.closeModal,5e3)},closeModal:function(){this.isModalOpen=!1,this.showOrderPreview=!1},loadEmptyOrder:function(){var e=this.$store.getters.getEmptyOrder;this.order=JSON.parse(JSON.stringify(e))}},components:{datePicker:m,checkoutGuestModal:Rt,checkoutModal:Lt,checkoutMobile:Nt}},Gt=Mt,Ht=Object(f["a"])(Gt,kt,bt,!1,null,null,null),Jt=Ht.exports,Wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"review-list"},[r("section",{staticClass:"reviews"},e._l(e.reviews,(function(e){return r("review-preview",{key:e.id,attrs:{review:e}})})),1)])},qt=[],Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"review-preview-container"},[r("div",{staticClass:"review-user-info flex align-center"},[r("img",{attrs:{src:e.review.by.imgUrl}}),r("div",{staticClass:"review-user"},[r("h3",[e._v(e._s(e.review.by.fullname))]),r("h4",{staticClass:"data"},[e._v(e._s(e.review.createdAt))])])]),r("div",[r("long-text",{attrs:{summary:e.review.txt}})],1)])},Kt=[],Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"long-text-container"},[r("p",[e._v(e._s(e.textForDisplay)+" "),!e.expandText&&e.isLongTxt?r("span",[e._v("...")]):e._e()]),e.isLongTxt?r("p",{staticClass:"long-text-btn",on:{click:e.toggleText}},[e._v(" "+e._s(e.textButton)+" ")]):e._e()])},zt=[],Xt={name:"long-text",props:["summary"],data:function(){return{expandText:!1,textBtn:""}},methods:{toggleText:function(){this.expandText=!this.expandText}},computed:{textForDisplay:function(){return this.expandText?this.summary:this.summary.slice(0,210)},textButton:function(){return this.expandText?"Hide":"Show More >"},isLongTxt:function(){return this.summary.length>210}}},Qt=Xt,Zt=Object(f["a"])(Qt,Vt,zt,!1,null,null,null),er=Zt.exports,tr={name:"review-preview",props:{review:Object},components:{longText:er}},rr=tr,sr=Object(f["a"])(rr,Yt,Kt,!1,null,null,null),nr=sr.exports,ar={name:"review-list",props:{reviews:Array},data:function(){return{}},methods:{},components:{reviewPreview:nr}},ir=ar,or=Object(f["a"])(ir,Wt,qt,!1,null,null,null),cr=or.exports,lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"reviews-ratings-container"},[r("div",{staticClass:"review-header"},[r("font-awesome-icon",{attrs:{icon:"star"}}),r("p",{staticClass:"avg-rating"},[e._v(e._s(e.avgRate))]),r("span",{staticClass:"avg-rating"},[r("span",[e._v("Â·")]),e._v(" "+e._s(e.formattedReviewsCount)+" ")])],1),r("div",{staticClass:"review-ratings"},[r("p",[e._v("Cleanliness")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:96,format:e.formatRate}}),r("p",[e._v("Communication")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:98,format:e.formatRate}}),r("p",[e._v("Check-in")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:100,format:e.formatRate}})],1),r("div",{staticClass:"review-ratings2"},[r("p",[e._v("Accuracy")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:90,format:e.formatRate}}),r("p",[e._v("Location")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:85,format:e.formatRate}}),r("p",[e._v("Value")]),r("el-progress",{staticClass:"progress-bar",attrs:{percentage:89,format:e.formatRate}})],1)])},ur=[],dr={name:"stay-rating",props:{reviews:Array},data:function(){return{}},computed:{avgRate:function(){if(!this.reviews.length)return 0;var e=this.reviews.reduce((function(e,t){return e+t.rate}),0);return(e/this.reviews.length).toFixed(1)},formattedReviewsCount:function(){return 1===this.reviews.length?"(".concat(this.reviews.length," review)"):this.reviews.length>1?"(".concat(this.reviews.length," reviews)"):void 0}},methods:{formatRate:function(e){return e>99?"5.0":(e/20).toFixed(1)}}},pr=dr,hr=Object(f["a"])(pr,lr,ur,!1,null,null,null),fr=hr.exports,gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.stay?r("section",{staticClass:"review-add"},[r("fieldset",[r("legend",[r("button",{staticClass:"add-btn",on:{click:e.toggleAddReview}},[e._v(" "+e._s(this.reviewToggle?"Cancel":"Add a review")+" ")])]),e.reviewToggle?r("form",{staticClass:"form-review flex column",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[r("div",{staticClass:"stars"},e._l(5,(function(t,s){return r("span",{key:s,staticClass:"fa fa-star",class:{checked:t<=e.stayReview.rate},on:{click:function(r){return e.changeColor(t)}}})})),0),r("label",[r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.stayReview.text,expression:"stayReview.text",modifiers:{trim:!0}}],attrs:{cols:"40",rows:"5",placeholder:"Add Free Text..."},domProps:{value:e.stayReview.text},on:{input:function(t){t.target.composing||e.$set(e.stayReview,"text",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("button",{staticClass:"submit-btn btn"},[e._v("Submit Review")])]):e._e()])]):e._e()},mr=[],vr={props:["stay"],data:function(){return{stayReview:{fName:"Stays Reader",rate:3,readAt:(new Date).toDateString(),text:""},reviewToggle:!1}},mounted:function(){},created:function(){this.stayReview.readAt=this.currDate},methods:{resetReview:function(){this.stayReview={text:"",fullName:"",readAt:(new Date).toDateString(),rate:3}},save:function(){this.$emit("saveReview",this.stayReview),this.resetReview(),this.toggleAddReview()},changeColor:function(e){this.stayReview.rate=e},toggleAddReview:function(){this.reviewToggle=!this.reviewToggle}},computed:{currDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},stayId:function(){return this.$route.params.stayId}}},yr=vr,wr=Object(f["a"])(yr,gr,mr,!1,null,null,null),_r=wr.exports,kr={name:"stayDetails",data:function(){return{isLoading:!0,stay:null,imgs:null,reviews:[],explorePage:!0,onDetailsPage:!0}},created:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.$route.params.stayId,!r){t.next=11;break}return t.next=5,e.$store.dispatch({type:"getStayById",stayId:r});case 5:s=t.sent,e.isLoading=!1,e.stay=JSON.parse(JSON.stringify(s)),n=e.$store.getters.imgsToShow,e.imgs=n,e.reviews=e.stay.reviews;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log("Cannot get stay with id:",stayId);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},beds:function(){return 1===this.stay.capacity?this.stay.capacity+" bed":this.stay.capacity+" beds"},bath:function(){},formattedReviews:function(){return this.stay.reviews.length?1===this.stay.reviews.length?"(".concat(this.stay.reviews.length," review)"):this.stay.reviews.length>1?"(".concat(this.stay.reviews.length," reviews)"):void 0:"(new)"},formattedName:function(){var e=this.stay.name,t=e.charAt(0).toUpperCase()+e.slice(1);return t},avgRate:function(){if(!this.stay.reviews.length)return 0;var e=this.stay.reviews.reduce((function(e,t){return e+t.rate}),0);return(e/this.stay.reviews.length).toFixed(1)}},methods:{placeOrder:function(e){var t=this;return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,s=t.stay,n=s._id,a=s.name,i=s.price,e.stay={_id:n,name:a,price:i},e.hostId=t.stay.host._id,t.loggedInUser){r.next=8;break}return ee("You must login first"),t.$emit("toggleLogin"),r.abrupt("return");case 8:return r.next=10,t.$store.dispatch({type:"addOrder",order:e});case 10:r.sent,ee("The order was sent for approval"),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),ee("The order failed","error");case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()},createTrip:function(e,t){var r=this;return Object(X["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:console.log("creatring trip gor order",t),n={imgUrls:r.stay.imgUrls.slice(0,3),stayName:r.stay.name,checkInDate:new Date(t.dates.checkInDate).toLocaleDateString(),checkOutDate:new Date(t.dates.checkOutDate).toLocaleDateString(),totalPrice:t.totalPrice,status:t.status,tripId:r.createId(),orderId:e},r.$store.commit({type:"addTrip",trip:n});case 3:case"end":return s.stop()}}),s)})))()},iconToShow:function(e){return ct.getIcon(e)},createId:function(){return"id"+(new Date).getTime()}},mounted:function(){window.scrollTo(0,0)},components:{GmapMap:_t,stayCheckout:Jt,reviewList:cr,stayRating:fr,longText:er,reviewAdd:_r,showMsg:ee}},br=kr,Cr=Object(f["a"])(br,it,ot,!1,null,null,null),xr=Cr.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"stay-app main-container"},[r("div",{staticClass:"sub-header"},[r("p",[e._v(" "+e._s(e.numOfResults)+" stays "+e._s(e.city)+" "),r("br"),e._v(" Review COVID-19 travel restrictions before you book. ")])]),r("hr"),r("stay-list",{attrs:{stays:e.stays}})],1)},Or=[],$r={components:{stayList:Ve,secondaryFilters:J,guestsFilter:R},name:"stay-app",data:function(){return{}},created:function(){},computed:{stays:function(){return this.$store.getters.staysToShow},numOfResults:function(){return this.$store.getters.staysToShow.length},city:function(){var e=this.$store.getters.filterBy;return e.city?"in "+e.city:"to explore"}},mounted:function(){window.scrollTo(0,0)}},Rr=$r,Br=Object(f["a"])(Rr,Sr,Or,!1,null,null,null),Tr=Br.exports,Ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.stay?r("section",{staticClass:"stay-details edit main-container"},[r("label",{attrs:{for:""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stay.name,expression:"stay.name"}],staticClass:"stay-name",attrs:{type:"text"},domProps:{value:e.stay.name},on:{input:function(t){t.target.composing||e.$set(e.stay,"name",t.target.value)}}})]),r("div",{staticClass:"review-details"},[[r("font-awesome-icon",{attrs:{icon:"star"}}),r("span",{staticClass:"rate"},[e._v(e._s(e.stay.avgRate))]),r("span",{staticClass:"reviews"},[e._v(e._s(e.formattedReviews))]),e._v("Â· ")],r("label",{attrs:{for:""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stay.loc.address,expression:"stay.loc.address"}],attrs:{type:"text"},domProps:{value:e.stay.loc.address},on:{input:function(t){t.target.composing||e.$set(e.stay.loc,"address",t.target.value)}}})])],2),r("img-upload",{attrs:{imgUrls:e.imgs},on:{save:e.saveImg}}),r("img-list",{attrs:{imgUrls:e.imgUrls}}),r("div",{staticClass:"details-main-container flex"},[r("div",{staticClass:"stay-details-left-container"},[r("div",{staticClass:"info-header flex align-center space-between"},[r("div",[r("h2",[e._v(e._s(e.stay.type)+" hosted by "+e._s(e.stay.host.fullname))]),r("p",[r("label",{attrs:{for:""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stay.capacity,expression:"stay.capacity"}],attrs:{type:"number"},domProps:{value:e.stay.capacity},on:{input:function(t){t.target.composing||e.$set(e.stay,"capacity",t.target.value)}}})]),e._v(" guests "),r("span",[e._v(" Â· ")]),r("label",{attrs:{for:""}},[e._v(" StayType: "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.stay.type,expression:"stay.type"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.stay,"type",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"Entire home"}},[e._v("Entire home")]),r("option",{attrs:{value:"Entire condo"}},[e._v("Entire condo")]),r("option",{attrs:{value:"Entire rental unit"}},[e._v("Entire rental unit")]),r("option",{attrs:{value:"Entire loft"}},[e._v("Entire loft")]),r("option",{attrs:{value:"Entire bungalow"}},[e._v("Entire bungalow")]),r("option",{attrs:{value:"Private Room"}},[e._v(" Private room in rental unit ")])])]),r("span",[e._v(" Â·")]),e._v(" "+e._s(e.beds)+" "),r("span",[e._v(" Â·")]),r("label",{attrs:{for:""}},[e._v(" price: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.stay.price,expression:"stay.price"}],attrs:{type:"number"},domProps:{value:e.stay.price},on:{input:function(t){t.target.composing||e.$set(e.stay,"price",t.target.value)}}})]),r("span",[e._v("/ night ")])])]),r("img",{attrs:{src:e.stay.host.imgUrl,alt:""}})]),r("hr"),r("div",{staticClass:"assets-container"},[r("div",{staticClass:"assets-content"},[r("div",{staticClass:"icon"},[r("font-awesome-icon",{attrs:{icon:"home"}})],1),e._m(0)]),r("div",{staticClass:"assets-content"},[r("div",{staticClass:"icon"},[r("font-awesome-icon",{attrs:{icon:"broom"}})],1),e._m(1)]),r("div",{staticClass:"assets-content"},[r("div",{staticClass:"icon"},[r("font-awesome-icon",{attrs:{icon:"door-closed"}})],1),e._m(2)]),r("div",{staticClass:"assets-content"},[r("div",{staticClass:"icon"},[r("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._m(3)])]),r("hr"),r("div",{staticClass:"details-summary-container"},[r("label",{attrs:{for:"summary"}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.stay.summary,expression:"stay.summary"}],attrs:{name:"summary",id:"",cols:"100",rows:"10"},domProps:{value:e.stay.summary},on:{input:function(t){t.target.composing||e.$set(e.stay,"summary",t.target.value)}}})])]),r("hr"),r("div",{staticClass:"stay-details-amenities"},[r("h2",[e._v("What this place offers")]),r("div",{staticClass:"amenities-content"},e._l(e.amenities,(function(t,s){return r("div",{key:s},[r("label",{attrs:{for:""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stay.amenities,expression:"stay.amenities"}],attrs:{type:"checkbox",id:t},domProps:{value:t,checked:Array.isArray(e.stay.amenities)?e._i(e.stay.amenities,t)>-1:e.stay.amenities},on:{change:function(r){var s=e.stay.amenities,n=r.target,a=!!n.checked;if(Array.isArray(s)){var i=t,o=e._i(s,i);n.checked?o<0&&e.$set(e.stay,"amenities",s.concat([i])):o>-1&&e.$set(e.stay,"amenities",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.stay,"amenities",a)}}}),r("span",{staticClass:"amenity"})]),e._v(" "+e._s(t)+" ")])})),0)])]),r("div",{staticClass:"stay-details-right-container"},[r("button",{staticClass:"save-stay",on:{sava:e.saveEdit}},[e._v("Save")])])])],1):e._e()},Ir=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Entire home")]),r("p",[e._v("Youâ€™ll have the loft to yourself.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Enhanced Clean")]),r("p",[e._v(" This Host committed to Airbnb's 5-step enhanced cleaning process. Show more ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Self check-in")]),r("p",[e._v("Check yourself in with the lockbox.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"asset-details"},[r("h4",[e._v("Great location")]),r("p",[e._v("100% of recent guests gave the location a 5-star rating.")])])}],Er=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"images-display-container"},[e.isLoading?s("img",{staticClass:"loader",attrs:{src:r("47c5"),alt:""}}):[e._l(e.imgUrls,(function(t,r){return s("label",{key:r,class:{drag:e.isDragOver,"not-drag":!e.isDragOver},attrs:{for:"imgUploader"},on:{drop:function(t){return t.preventDefault(),e.handleFile.apply(null,arguments)},dragover:function(t){return t.preventDefault(),e.dragOver.apply(null,arguments)},dragleave:function(t){e.isDragOver=!1}}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("img",{key:r,attrs:{alt:"Drop images here",src:e.isDragOver?e.imgUrl:t}})])],1)})),s("input",{staticClass:"upload-input",attrs:{type:"file",name:"img-uploader",id:"imgUploader"},on:{change:e.handleFile}})]],2)},Lr=[],Pr=(r("7db0"),r("bc3a")),jr=r.n(Pr),Ar=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r,s,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="daniiel",s="disku3v4j",n="https://api.cloudinary.com/v1_1/".concat(s,"/image/upload"),a=new FormData,a.append("file",t),a.append("upload_preset",r),e.prev=6,e.next=9,jr.a.post(n,a);case 9:return i=e.sent,e.abrupt("return",i.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),Dr={name:"img-upload",props:{imgUrls:Array},data:function(){return{isLoading:!1,isDragOver:!1}},methods:{dragOver:function(e){this.isDragOver=!0},handleFile:function(e,t){var r;"change"===e.type?r=e.target.files[0]:"drop"===e.type&&(r=e.dataTransfer.files[0]),this.onUploadImg(r),this.imgUrls.find((function(e){console.log("imgUrl",e)})),console.log(r),console.log(this.imgUrls),this.file=t},onUploadImg:function(e){var t=this;return Object(X["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,t.isDragOver=!1,console.log("file 89",e),r.next=5,Ar(e);case 5:s=r.sent,t.$emit("save",s.url),t.isLoading=!1;case 8:case"end":return r.stop()}}),r)})))()}}},Fr=Dr,Nr=Object(f["a"])(Fr,Er,Lr,!1,null,null,null),Mr=Nr.exports,Gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"img-list-container"},e._l(e.imgUrls,(function(e,t){return r("img",{key:t,attrs:{src:e,alt:"img..."}})})),0)},Hr=[],Jr={name:"img-list",props:{imgUrls:Array},computed:{listHeader:function(){return this.imgUrls&&this.imgUrls.length?"<h2></h2><h3></h3>":"<h2>No images</h2>"}},methods:{}},Wr=Jr,qr=Object(f["a"])(Wr,Gr,Hr,!1,null,null,null),Yr=qr.exports,Kr="/api/",Vr=jr.a.create({withCredentials:!0}),zr={get:function(e,t){return Xr(e,"GET",t)},post:function(e,t){return Xr(e,"POST",t)},put:function(e,t){return Xr(e,"PUT",t)},delete:function(e,t){return Xr(e,"DELETE",t)}};function Xr(e){return Qr.apply(this,arguments)}function Qr(){return Qr=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r,s,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"GET",s=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,Vr({url:"".concat(Kr).concat(t),method:r,data:s,params:"GET"===r?s:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data:"),s),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(void 0).push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),Qr.apply(this,arguments)}var Zr={query:es,getById:ns,remove:is,save:cs,getEmptyStay:us,getHostStays:rs};function es(e){return ts.apply(this,arguments)}function ts(){return ts=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("filterBy frontend service",t),e.next=3,zr.get("stay",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function rs(e){return ss.apply(this,arguments)}function ss(){return ss=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("hostId",t),r=t?"?hostId=".concat(t):"",es="".concat(r),e.next=5,zr.get("stay".concat(es));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function ns(e){return as.apply(this,arguments)}function as(){return as=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("stayId service front",t),e.next=3,zr.get("stay/".concat(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function is(e){return os.apply(this,arguments)}function os(){return os=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zr.delete("stay/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function cs(e){return ls.apply(this,arguments)}function ls(){return ls=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,zr.put("stay/"+t._id,t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,zr.post("stay/",t);case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function us(){return{name:"",price:0,summary:"",imgUrls:[],type:"",capacity:0,amenities:[],avgRate:0,loc:{country:"",countryCode:"",address:"",lat:0,lng:0},reviews:[],likedByUsers:[]}}var ds={name:"edit-stay",data:function(){return{imgUrls:[],stay:null,imgs:null,amenities:["Kitchen","Wifi","TV","Coffee","Crib","Smoking allowed","No smoking","Pets allowed","Cooking basics","Air conditioning","Refrigerator","Free parking","Bathub","Heating","Pool","Accessible","Long term stays allowed"]}},created:function(){var e=this,t=this.$route.params.stayId;t&&this.$store.dispatch({type:"getStayById",stayId:t}).then((function(t){e.stay=JSON.parse(JSON.stringify(t));var r=e.$store.getters.imgsToShow;e.imgs=r,console.log(r),e.reviews=e.stay.reviews}))},computed:{beds:function(){return 1===this.stay.capacity?this.stay.capacity+" bed":this.stay.capacity+" beds"},formattedReviews:function(){return this.stay.reviews.length?1===this.stay.reviews.length?"(".concat(this.stay.reviews.length," review)"):this.stay.reviews.length>1?"(".concat(this.stay.reviews.length," reviews)"):void 0:"New"}},methods:{saveImg:function(e){this.stay.imgUrls=this.imgUrl,this.imgUrls.push(e)},mounted:function(){window.scrollTo(0,0)},saveEdit:function(){Zr.save(this)}},components:{longText:er,imgUpload:Mr,imgList:Yr}},ps=ds,hs=Object(f["a"])(ps,Ur,Ir,!1,null,null,null),fs=hs.exports,gs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-page-container main-container flex column"},[r("nav",{staticClass:"user-profile-nav flex"},[r("ul",{staticClass:"nav_profile clean-list flex"},[r("li",{staticClass:"nav_user",on:{click:function(t){return e.showSection("Notifications")}}},[e._v(" Notifications ")]),r("router-link",{attrs:{to:"/stay/edit"}},[r("li",{staticClass:"nav"},[e._v("Add stay")])]),r("li",{staticClass:"nav_user",on:{click:function(t){return e.showSection("Listed Stays")}}},[e._v(" Listed Stays ")]),r("li",{staticClass:"nav_user",on:{click:function(t){return e.showSection("Orders")}}},[e._v("Orders")])],1)]),r("hr"),r("div",{staticClass:"user-section-cont"},[r("h1",[e._v(e._s(e.titleForDisplay))]),r("section",{directives:[{name:"show",rawName:"v-show",value:"Notifications"===e.currSection,expression:"currSection === 'Notifications'"}]},[e.dataForList.length?[r("div",{staticClass:"data-table"},[e._l(e.dataForList[0],(function(t,s,n){return r("span",{key:n},[r("strong",[e._v(e._s(e.upperCaseFirstChar(s)))])])})),e._m(0)],2)]:r("h3",[e._v(" No "+e._s(e.titleForDisplay.toLowerCase())+" to display ")])],2),r("section",{directives:[{name:"show",rawName:"v-show",value:"Listed Stays"===e.currSection,expression:"currSection === 'Listed Stays'"}]},[e.staysToShow.length?[r("div",{staticClass:"data-table"},[e._l(e.headersToShow,(function(t,s){return r("span",{key:s},[r("strong",[e._v(e._s(t))])])})),e._l(e.staysToShow,(function(t){return[r("img",{key:t._id+"img",attrs:{src:t.imgUrls[0],alt:""}}),r("span",{key:t._id+t.name},[e._v(e._s(t.name))]),r("span",{key:t._id+t.type},[e._v(e._s(t.type))]),r("span",{key:t._id+t.loc.address},[e._v(e._s(t.loc.address))]),r("span",{key:t._id+t.price},[e._v("$"+e._s(t.price))]),r("span",{key:t._id+t.avgRate},[e._v(e._s(t.avgRate))]),r("button",{key:t._id+"edit",on:{click:function(r){return e.editStay(t._id)}}},[e._v(" Edit ")])]}))],2)]:r("h3",[e._v(" No "+e._s(e.titleForDisplay.toLowerCase())+" to display ")])],2),r("section",{directives:[{name:"show",rawName:"v-show",value:"Orders"===e.currSection,expression:"currSection === 'Orders'"}]},[e.ordersToShow.length?[r("div",{staticClass:"data-table"},[e._l(e.headersToShow,(function(t,s){return r("span",{key:s},[r("strong",[e._v(e._s(t))])])})),e._l(e.ordersToShow,(function(t){return[r("img",{key:t._id+t.buyer.imgUrl,attrs:{src:t.buyer.imgUrl}}),r("span",{key:t._id+t.buyer.fullname},[e._v(e._s(t.buyer.fullname))]),r("span",{key:t._id+t.dates.checkInDate},[e._v(e._s(e.formateDate(t.dates.checkInDate)))]),r("span",{key:t._id+t.dates.checkOutDate},[e._v(e._s(e.formateDate(t.dates.checkOutDate)))]),r("span",{key:t._id+t.totalPrice},[e._v("$"+e._s(t.totalPrice.toLocaleString()))]),r("span",{key:t._id+t.status,staticClass:"status"},[e._v(e._s(t.status))]),r("button",{key:t._id,attrs:{disabled:"approved"===t.status},on:{click:function(r){return e.orderActionBtnClicked(e.ordersActionBtnTxt,t)}}},[e._v(" "+e._s("approved"===t.status?"Approved":e.ordersActionBtnTxt)+" ")])]}))],2)]:r("h3",[e._v(" No "+e._s(e.titleForDisplay.toLowerCase())+" to display ")])],2)])])},ms=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Actions")])])}],vs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-table"},[e._l(e.data.headers,(function(t,s){return r("span",{key:s},[r("strong",[e._v(e._s(t))])])})),e._l(e.dataForList,(function(t){return[r("img",{attrs:{src:t.imgUrl,alt:""}}),r("span",[e._v(e._s(t.header1))]),r("span",[e._v(e._s(t.header2))]),r("span",[e._v(e._s(t.header3))]),r("span",[e._v(e._s(t.header4))])]}))],2)},ys=[],ws={name:"data-table",props:{data:Array},data:function(){return{}}},_s=ws,ks=Object(f["a"])(_s,vs,ys,!1,null,null,null),bs=ks.exports,Cs={name:"user-profile",data:function(){return{loggedInUser:null,navList:["Notifications","Add stay","Listed Stays","Orders"],currSection:"Orders",hostStays:null,user:null,dataForList:[]}},created:function(){this.loadUser(),this.loadOrders(),this.loadHostStays()},destroy:function(){this.$store.commit({type:"clearAllFilters"})},methods:{loadUser:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loggedInUser=e.$store.getters.loggedInUser;case 1:case"end":return t.stop()}}),t)})))()},loadOrders:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={userId:e.loggedInUser._id,userType:e.loggedInUser.isHost?"host":"user"},console.log("user7777777",r),t.next=4,e.$store.dispatch({type:"loadOrders",user:r});case 4:e.orders=e.$store.getters.ordersToShow;case 5:case"end":return t.stop()}}),t)})))()},loadHostStays:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loggedInUser.isHost){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$store.dispatch({type:"loadHostStays",hostId:e.loggedInUser._id});case 4:case"end":return t.stop()}}),t)})))()},showNotifications:function(){this.currSection="Notifications"},showSection:function(e){this.currSection=e},upperCaseFirstChar:function(e){return"string"===typeof e?e[0].toUpperCase()+e.substring(1):e},editStay:function(e){this.$router.push("/stay/".concat(e,"/edit"))},formateDate:function(e){return new Date(e).toLocaleDateString()},orderActionBtnClicked:function(e,t){if("Approve"===e)this.approveOrder(t);else{if("Cancel"!==e)return;this.cancelOrder(t)}},approveOrder:function(e){console.log("approve order:",e),this.loggedInUser.isHost&&(e.status="approved",this.$store.dispatch({type:"updateOrder",order:e}))},cancelOrder:function(e){console.log("cancel order:",e)}},computed:{titleForDisplay:function(){return this.currSection},ordersToShow:function(){return this.$store.getters.ordersToShow},staysToShow:function(){return this.loggedInUser.isHost?this.$store.getters.hostStays:[]},headersToShow:function(){var e=this.currSection;return"Orders"===e?["imgUrl","From","Start","End","Total","Status","Actions"]:"Listed Stays"===e?["imgUrl","Name","Type","Address","Price","Rating","Actions"]:"Notifications"===e?["imgUrl","User","Message","Stay","Date","Actions"]:void 0},ordersActionBtnTxt:function(){return this.loggedInUser.isHost?"Approve":"Cancel"}},mounted:function(){window.scrollTo(0,0)},components:{dataTable:bs}},xs=Cs,Ss=Object(f["a"])(xs,gs,ms,!1,null,null,null),Os=Ss.exports,$s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container home"},[r("ul",{staticClass:"order-list"},e._l(e.orders,(function(t,s){return r("li",{key:s},[r("h3",[e._v(e._s(t._id))]),e._v(" "+e._s(t.status)+" "),r("hr")])})),0),r("hr")])},Rs=[],Bs={name:"home",data:function(){return{user:null}},computed:{orders:function(){return console.log("this.$store.getters.ordersToShow;",this.$store.getters.ordersToShow),this.$store.getters.ordersToShow},loggedInUser:function(){return this.$store.getters.loggedInUser}},created:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadUser(),t.next=3,e.$store.dispatch({type:"loadOrders",user:e.user});case 3:case"end":return t.stop()}}),t)})))()},methods:{loadUser:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.$store.getters.loggedInUser,e.user={userId:r._id,userType:r.isHost?"host":"user"};case 2:case"end":return t.stop()}}),t)})))()}}},Ts=Bs,Us=Object(f["a"])(Ts,$s,Rs,!1,null,null,null),Is=Us.exports,Es=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"wishlist-container main-container"},[r("h2",[e._v("Wishlist")]),e.stays?r("wishlist",{attrs:{stays:e.stays}}):e._e(),e.loggedInUser&&e.stays?e._e():r("h2",[e._v("No items in your wishlist")])],1)},Ls=[],Ps=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.likedStays.length?r("ul",{staticClass:"stay-list"},e._l(e.likedStays,(function(e){return r("li",{key:e._id,staticClass:"clear-list stay-list"},[r("stay-preview",{attrs:{stay:e},on:{click:function(e){e.stopPropagation()}}})],1)})),0):r("div",[e._v("No Available Stays")])])},js=[],As=(r("caad"),r("2532"),{components:{stayPreview:We},props:{stays:Array},computed:{likedStays:function(){var e=this;return this.stays.filter((function(t){return t.likedByUsers.includes(e.$store.getters.loggedInUser._id)}))}}}),Ds=As,Fs=Object(f["a"])(Ds,Ps,js,!1,null,null,null),Ns=Fs.exports,Ms={components:{wishlist:Ns},props:{},data:function(){return{loggedInUser:null}},computed:{stays:function(){return this.$store.getters.staysToShow}},methods:{},created:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.scrollTo(0,0),t.next=3,e.$store.dispatch({type:"loadStays"});case 3:e.loggedInUser=e.$store.getters.loggedInUser;case 4:case"end":return t.stop()}}),t)})))()}},Gs=Ms,Hs=Object(f["a"])(Gs,Es,Ls,!1,null,null,null),Js=Hs.exports;s["default"].use(Be["a"]);var Ws=[{path:"/",name:"Home",component:at},{path:"/explore",name:"Explore",component:Tr},{path:"/become-host",name:"BecomeHost",component:fs},{path:"/user-profile",name:"userProfile",component:Os},{path:"/trips",name:"trips",component:Is},Object(Re["a"])({path:"/stay/:stayId?/edit",component:fs},"component",fs),{path:"/stay/:stayId",name:"stayDetails",component:xr},{path:"/wishlist/:userId",component:Js}],qs=new Be["a"]({mode:"history",base:"/",routes:Ws}),Ys=qs,Ks=r("2f62"),Vs=r("5530");r("2909"),r("d81d"),r("c740"),r("a434");var zs=r("daa8"),Xs="order-added",Qs="order-updated",Zs="",en=tn();function tn(){var e=null,t={setup:function(){return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(zs["a"])(Zs);case 1:case"end":return t.stop()}}),t)})))()},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}window.socketService=en,en.setup();var rn="loggedinUser",sn={login:dn,logout:gn,signup:hn,getLoggedInUser:yn,getUsers:nn,getById:an,remove:cn,update:ln};function nn(){return zr.get("user")}function an(e){return on.apply(this,arguments)}function on(){return on=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zr.get("user/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),on.apply(this,arguments)}function cn(e){return zr.delete("user/".concat(e))}function ln(e){return un.apply(this,arguments)}function un(){return un=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return yn()._id===t._id&&vn(t),e.next=3,zr.put("user/".concat(t._id),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),un.apply(this,arguments)}function dn(e){return pn.apply(this,arguments)}function pn(){return pn=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("userCred in frontend service",t),e.next=3,zr.post("auth/login",t);case 3:if(r=e.sent,en.emit("set-user-socket",r._id),!r){e.next=7;break}return e.abrupt("return",vn(r));case 7:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function hn(e){return fn.apply(this,arguments)}function fn(){return fn=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zr.post("auth/signup",t);case 2:return r=e.sent,en.emit("set-user-socket",r._id),e.abrupt("return",vn(r));case 5:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}function gn(){return mn.apply(this,arguments)}function mn(){return mn=Object(X["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(rn),en.emit("unset-user-socket"),e.next=4,zr.post("auth/logout");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function vn(e){return sessionStorage.setItem(rn,JSON.stringify(e)),e}function yn(){return JSON.parse(sessionStorage.getItem(rn)||"null")}window.userService=sn;var wn,_n={state:{loggedInUser:sn.getLoggedInUser(),watchedUser:null,ownedStays:null,notifications:[],trips:[]},getters:{miniUser:function(e){var t=e.user._id,r=e.user.fullname,s=e.user.imgUrl;return{_id:t,fullname:r,imgUrl:s}},loggedInUser:function(e){return console.log("loggedin",e.loggedInUser),e.loggedInUser},reviewsByUser:function(e){return e.reviewsByUser},watchedUser:function(e){var t=e.watchedUser;return t},notification:function(e){return e.notification},trips:function(e){return console.log("state.trips",e.trips),e.trips}},mutations:{setLoggedInUser:function(e,t){var r=t.user;e.loggedInUser=r?Object(Vs["a"])({},r):null},setWatchedUser:function(e,t){var r=t.user;e.watchedUser=r},setUsers:function(e,t){var r=t.users;e.users=r},removeUser:function(e,t){var r=t.userId;e.users=e.users.filter((function(e){return e._id!==r}))},addNotification:function(e,t){console.log("user store add notif",t)},addTrip:function(e,t){var r=t.trip;console.log("ISER STORE GOT TRIP:",r),e.trips.unshift(r)}},actions:{login:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.userCred,r.prev=2,r.next=5,sn.login(n);case 5:return a=r.sent,s({type:"setLoggedInUser",user:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("userStore: Error in login",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},signup:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.userCred,r.prev=2,r.next=5,sn.signup(n);case 5:return a=r.sent,s({type:"setLoggedInUser",user:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("userStore: Error in signup",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},logout:function(e){return Object(X["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,sn.logout();case 4:r({type:"setLoggedInUser",user:null}),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](1),console.log("userStore: Error in logout",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},loadUsers:function(e){return Object(X["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,sn.getUsers();case 4:s=t.sent,r({type:"setUsers",users:s}),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](1),console.log("userStore: Error in loadUsers",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},loadAndWatchUser:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.userId,r.prev=2,r.next=5,sn.getById(n);case 5:a=r.sent,s({type:"setWatchedUser",user:a}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("userStore: Error in loadAndWatchUser",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},removeUser:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.userId,r.prev=2,r.next=5,sn.remove(n);case 5:s({type:"removeUser",userId:n}),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](2),console.log("userStore: Error in removeUser",r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},updateUser:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.user,r.prev=2,r.next=5,sn.update(n);case 5:n=r.sent,s({type:"setUser",user:n}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("userStore: Error in updateUser",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},loadOwnedStays:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.commit,s=t.hostId,r.prev=2,dispatch({type:"setFilter",filterBy:s}),r.next=10;break;case 6:throw r.prev=6,r.t0=r["catch"](2),console.log("userStore: Error in loadOwnedStays",r.t0),r.t0;case 10:case"end":return r.stop()}}),r,null,[[2,6]])})))()}}},kn={strict:!0,state:{stays:[],hostStays:[],filterBy:(wn={hostId:"",city:"",guests:"",dates:{checkInDate:"",checkOutDate:""}},Object(Re["a"])(wn,"guests",{adults:0,children:0,infants:0,pets:0}),Object(Re["a"])(wn,"totalGuests",0),Object(Re["a"])(wn,"priceRange",[15,850]),Object(Re["a"])(wn,"amenities",[]),Object(Re["a"])(wn,"propertyType",""),wn),currStay:null,isLoading:!1},getters:{filterBy:function(e){return e.filterBy},staysToShow:function(e){return e.stays},avgPrice:function(e){return e.stays.reduce((function(t,r){r.price,e.stays.length}))},imgsToShow:function(e){return e.currStay.imgUrls.slice(0,5)},hostStays:function(e){return e.hostStays},isLoading:function(e){var t=e.isLoading;return t}},mutations:{setLoading:function(e,t){var r=t.isLoading;e.isLoading=r},setFilter:function(e,t){var r=t.filterBy;e.filterBy=r},setStays:function(e,t){var r=t.stays;e.stays=r},setStay:function(e,t){var r=t.stay;e.currStay=r},updateStay:function(e,t){var r=t.stay;console.log("state in store of stay",r);var s=e.stays.findIndex((function(e){return e._id===r._id}));console.log("stays in state in update stay",e.stays),console.log("idx",s),e.stays.splice(s,1,r)},clearAllFilters:function(e){var t;e.filterBy=(t={hostId:"",city:"",guests:"",dates:{checkInDate:"",checkOutDate:""}},Object(Re["a"])(t,"guests",{adults:0,children:0,infants:0,pets:0}),Object(Re["a"])(t,"totalGuests",0),Object(Re["a"])(t,"priceRange",[15,850]),Object(Re["a"])(t,"amenities",[]),Object(Re["a"])(t,"propertyType",""),t)},setHostStays:function(e,t){var r=t.hostStays;e.hostStays=r}},actions:{loadStays:function(e){return Object(X["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,s=e.state,r({type:"setLoading",isLoading:!0}),t.prev=2,t.next=5,Zr.query(s.filterBy);case 5:n=t.sent,r({type:"setStays",stays:n}),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),t.t0;case 12:return t.prev=12,r({type:"setLoading",isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()},loadHostStays:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.hostId,r.prev=2,r.next=5,Zr.getHostStays(n);case 5:a=r.sent,s({type:"setHostStays",hostStays:a}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),console.log("stayStore: Error in loadHostStays",r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},setFilter:function(e,t){var r=e.commit,s=e.dispatch,n=t.filterBy;r({type:"setFilter",filterBy:n}),s({type:"loadStays"})},getStayById:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.stayId,r.prev=2,r.next=5,Zr.getById(n);case 5:return a=r.sent,s({type:"setStay",stay:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("stayStore: Error in get stay",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},toggleLikedStay:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=e.rootGetters,a=t.stayId,r.prev=2,r.next=5,Zr.getById(a);case 5:return i=r.sent,console.log("rootGetters.loggedInUser._id",n.loggedInUser._id),o=i.likedByUsers.findIndex((function(e){return e===n.loggedInUser._id})),o<0?i.likedByUsers.push(n.loggedInUser._id):i.likedByUsers.splice(o,1),r.next=11,Zr.save(i);case 11:c=r.sent,console.log("stay store updatedStay",c),s({type:"updateStay",stay:c}),r.next=20;break;case 16:throw r.prev=16,r.t0=r["catch"](2),console.log("stay Store: Error in toggling wishList",r.t0),r.t0;case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()}},modules:{}},bn={query:Cn,getById:Sn,remove:$n,save:Bn,getEmptyOrder:Un};function Cn(e){return xn.apply(this,arguments)}function xn(){return xn=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,s=t.userType,console.log("frontend service: userId, userType",r,s),e.next=4,zr.get("order",{params:{userId:r,userType:s}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function Sn(e){return On.apply(this,arguments)}function On(){return On=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("front service get order",t),e.abrupt("return",zr.get("order/".concat(t)));case 2:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function $n(e){return Rn.apply(this,arguments)}function Rn(){return Rn=Object(X["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("front service order to delete",t),e.abrupt("return",zr.delete("order/".concat(t)));case 2:case"end":return e.stop()}}),e)}))),Rn.apply(this,arguments)}function Bn(e){return Tn.apply(this,arguments)}function Tn(){return Tn=Object(X["a"])(regeneratorRuntime.mark((function e(t){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t._id){e.next=7;break}return e.next=3,zr.put("order/".concat(t._id),t);case 3:return r=e.sent,e.abrupt("return",r);case 7:return console.log("front service order",t),e.next=10,zr.post("order",t);case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function Un(){return{hostId:"",createdAt:Date.now(),buyer:{_id:"",fullname:"",imgUrl:""},totalPrice:0,dates:{},totalNights:0,totalGuests:{},stay:{_id:"",name:"",price:0},status:"pending"}}var In={strict:!0,state:{currOrder:null,orders:[],emptyOrder:bn.getEmptyOrder(),notifications:0,trip:{location:"",dates:{},totalGuests:0}},getters:{getEmptyOrder:function(e){return e.emptyOrder},getNotifications:function(e){return e.notifications},ordersToShow:function(e){return e.orders},currTrip:function(e){return e.trip}},mutations:{setTrip:function(e,t){var r=t.trip;console.log(r),e.trip=r},addOrder:function(e,t){var r=t.order;console.log("added order in addOrder mutation",r),e.orders.push(r)},updateOrder:function(e,t){var r=t.order;console.log("updated order in updateOrder mutation",r);var s=e.orders.findIndex((function(e){return e._id===e._id}));e.orders.splice(s,1,r)},removeOrder:function(e,t){e.orders=e.orders.filter((function(e){return e._id!==t.orderId}))},setOrders:function(e,t){var r=t.orders;e.orders=r},currOrder:function(e,t){var r=t.order;e.currOrder=r}},actions:{loadOrders:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.user,r.prev=2,r.next=5,bn.query(n);case 5:a=r.sent,console.log("orders store after load",a),s({type:"setOrders",orders:a}),en.off(Xs),en.on(Xs,(function(e){console.log("Got added order from socket",e),s({type:"addOrder",order:e})})),en.off(Qs),en.on(Qs,(function(e){console.log("Got updated order from socket",e),s({type:"updateOrder",order:e})})),r.next=18;break;case 14:throw r.prev=14,r.t0=r["catch"](2),console.log("orderStore: Error in load orders",r.t0),r.t0;case 18:case"end":return r.stop()}}),r,null,[[2,14]])})))()},addOrder:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.order,r.prev=2,r.next=5,bn.save(n);case 5:return a=r.sent,s({type:"addOrder",order:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("stayStore: Error in add order",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},updateOrder:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.order,console.log("updating order"),r.prev=3,console.log("store: updateOrder dispatch function - order",n),r.next=7,bn.save(n);case 7:return a=r.sent,s({type:"updateOrder",order:a}),r.abrupt("return",a);case 12:throw r.prev=12,r.t0=r["catch"](3),console.log("stayStore: Error in update order",r.t0),r.t0;case 16:case"end":return r.stop()}}),r,null,[[3,12]])})))()},removeOrder:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.orderId,r.prev=2,r.next=5,bn.remove(n);case 5:s({type:"removeOrder",orderId:n}),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](2),console.log("stayStore: Error in remove order",r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},getOrder:function(e,t){return Object(X["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.commit,n=t.orderId,r.prev=2,r.next=5,bn.getById(n);case 5:return a=r.sent,s({type:"getOrder",order:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("stayStore: Error in getting order",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}};s["default"].use(Ks["a"]);var En=new Ks["a"].Store({strict:!0,modules:{userStore:_n,stayStore:kn,orderStore:In}}),Ln=(r("2fb4"),r("b2d6")),Pn=r.n(Ln),jn=r("5c96"),An=r.n(jn),Dn=r("755e"),Fn=r("c28b"),Nn=r.n(Fn),Mn=r("3d20"),Gn=r.n(Mn),Hn=(r("415b"),r("ecee")),Jn=r("f2d1"),Wn=r("c074"),qn=r("b702"),Yn=r("ad3d");window.Swal=Gn.a,Hn["c"].add(Jn["a"],Wn["a"],qn["a"]),s["default"].component("font-awesome-icon",Yn["a"]),s["default"].config.productionTip=!1,s["default"].use(Nn.a),s["default"].use(An.a,{locale:Pn.a}),s["default"].use(Dn,{load:{key:"AIzaSyAiwks8bz483lqJ9B_71_Q0LqoN6LKT5LE",libraries:"places",load:{region:"IL",language:"En"}}}),new s["default"]({router:Ys,store:En,render:function(e){return e(Oe)}}).$mount("#app"),document.addEventListener("DOMContentLoaded",(function(){var e=".nav_user",t=Array.from(document.querySelectorAll(e)),r=document.querySelector(".nav_profile");function s(r){var s=r.target;s&&s.matches(e)&&(t.forEach((function(e){return e.classList.remove("active")})),r.target.classList.add("active"))}r.addEventListener("mousedown",s)}))}});
//# sourceMappingURL=app.cdde4562.js.map